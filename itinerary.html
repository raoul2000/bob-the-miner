<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Bob The Miner | The Itinerary</title>
    <meta name="description" content="A new Web scraper ready to work for you !">
    
    
    <link rel="preload" href="/bob-the-miner/assets/css/4.styles.021bac94.css" as="style"><link rel="preload" href="/bob-the-miner/assets/js/app.d55ff3db.js" as="script"><link rel="preload" href="/bob-the-miner/assets/js/0.74f77579.js" as="script"><link rel="prefetch" href="/bob-the-miner/assets/js/1.9380be0a.js"><link rel="prefetch" href="/bob-the-miner/assets/js/2.0cd49815.js"><link rel="prefetch" href="/bob-the-miner/assets/js/3.ec8e4885.js">
    <link rel="stylesheet" href="/bob-the-miner/assets/css/4.styles.021bac94.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/bob-the-miner/" class="home-link router-link-active"><!----><span class="site-name">
      Bob The Miner
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><div class="sidebar"><!----><ul class="sidebar-links"><li><a href="/bob-the-miner/" class="sidebar-link">Home</a></li><li><a href="/bob-the-miner/intro.html" class="sidebar-link">Introduction</a></li><li><a href="/bob-the-miner/itinerary.html" class="active sidebar-link">Itinerary</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bob-the-miner/itinerary.html#a-single-page" class="sidebar-link">a Single Page</a></li><li class="sidebar-sub-header"><a href="/bob-the-miner/itinerary.html#many-pages" class="sidebar-link">Many Pages</a></li><li class="sidebar-sub-header"><a href="/bob-the-miner/itinerary.html#follow-me" class="sidebar-link">Follow Me</a></li></ul></li><li><a href="/bob-the-miner/extraction-plan.html" class="sidebar-link">Extraction Plan</a></li></ul></div><div class="page"><div class="content"><h1 id="the-itinerary"><a href="#the-itinerary" aria-hidden="true" class="header-anchor">#</a> The Itinerary</h1><blockquote><p>The <em>Itinerary</em> is when you tell bob where to go to start data extraction</p></blockquote><h2 id="a-single-page"><a href="#a-single-page" aria-hidden="true" class="header-anchor">#</a> a Single Page</h2><p>In its simplest form, the <em>itinerary</em> is the address of the page you want to mine.</p><pre class="language-js"><code>bob<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span> <span class="token string">&quot;http://hostname/path/index.html&quot;</span><span class="token punctuation">,</span> extractionPlan<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Another option is to pass an object with at least a <code>url</code> property. This is particularly useful if you need to control the request that will be created and sent. Bob relies on the <a href="https://github.com/request/request" target="_blank" rel="noopener noreferrer">request</a> module and the itinerary argument can be a complete <em>option</em> object as described in the <a href="https://github.com/request/request#requestoptions-callback" target="_blank" rel="noopener noreferrer">documentation</a>. In the example below, we tell Bob which user agent he should use to request the page.</p><pre class="language-js"><code>bob<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    <span class="token string">&quot;url&quot;</span>  <span class="token punctuation">:</span> <span class="token string">&quot;http://hostname/path/index.html&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;headers&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0;) Gecko/20100101 Firefox/59.0'</span>
    <span class="token punctuation">}</span>    
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  extractionPlan
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>In both cases of success, the result is an object :</p><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;source&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://hostname/path/index.html&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span>   <span class="token operator">:</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="many-pages"><a href="#many-pages" aria-hidden="true" class="header-anchor">#</a> Many Pages</h2><p>If you want to use the same extraction plan on several pages just provide an array of adresses and/or objects as the first argument.</p><pre class="language-js"><code>bob<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span>
    <span class="token string">&quot;http://hostname/path/index.html&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://hostname/path/product.html&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token string">&quot;url&quot;</span>  <span class="token punctuation">:</span> <span class="token string">&quot;http://hostname/path/contact.html&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;headers&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0;) Gecko/20100101 Firefox/59.0'</span>
      <span class="token punctuation">}</span>    
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  extractionPlan
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>In this case the result is an array of objects :</p><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token property">&quot;source&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://hostname/path/index.html&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span>   <span class="token operator">:</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token property">&quot;source&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://hostname/path/product.html&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span>   <span class="token operator">:</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token property">&quot;source&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://hostname/path/contact.html&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span>   <span class="token operator">:</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre><h2 id="follow-me"><a href="#follow-me" aria-hidden="true" class="header-anchor">#</a> Follow Me</h2><p>There may be some cases where you don't really know the complete itinerary before to start: you only know the first step and the way to find the direction to the next one. This is for example the case if you want to work on a paginated result set.</p><pre class="language-js"><code>bob<span class="token punctuation">.</span><span class="token function">work</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    <span class="token string">&quot;url&quot;</span>  <span class="token punctuation">:</span> <span class="token string">&quot;http://hostname/path/index.html&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;nextUrl&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;selector&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;div.post &gt; p &gt; a&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;type&quot;</span>     <span class="token punctuation">:</span> <span class="token string">&quot;@href&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;maxJump&quot;</span>    <span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  extractionPlan
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>The result is an array of objects</p><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token property">&quot;source&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://hostname/path/index.html&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span>   <span class="token operator">:</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;source&quot;</span> <span class="token operator">:</span>  <span class="token string">&quot;http://hostname/path/p2.html&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span>   <span class="token operator">:</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/bob-the-miner/intro.html" class="prev">
          Introduction
        </a></span><span class="next"><a href="/bob-the-miner/extraction-plan.html">
          Extraction Plan
        </a> →
      </span></p></div></div></div></div>
    <script src="/bob-the-miner/assets/js/0.74f77579.js" defer></script><script src="/bob-the-miner/assets/js/app.d55ff3db.js" defer></script>
  </body>
</html>
